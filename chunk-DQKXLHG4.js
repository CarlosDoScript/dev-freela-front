import{b as U}from"./chunk-GNNS6ZM6.js";import{a as A,b as D,c as k,d as G,e as w,f as V,g as L,h as z,i as $}from"./chunk-RMOZLYPB.js";import{b as S,d as f,f as b,g as y,i as _,k as F,l as M,m as O,n as B}from"./chunk-4PJ3TXTO.js";import{a as H}from"./chunk-4RZAZVH2.js";import{a as K,b as N,c as q,e as R}from"./chunk-LG2G5NZQ.js";import{$ as j,Fa as m,Ga as u,Ha as E,W as a,Z as s,Za as P,ab as x,d as J,da as l,gb as I,ha as p,ib as T,na as n,oa as i,pa as c,ta as g,ua as d,xa as h}from"./chunk-YW53WYO2.js";var C=J(K());function Q(o,e){if(o&1&&(n(0,"mat-error"),m(1),i()),o&2){let r=d();a(),u(r.message.required)}}function X(o,e){if(o&1&&(n(0,"mat-error"),m(1),i()),o&2){let r=d();a(),E(" ",r.message.required," ")}}function Y(o,e){if(o&1&&(n(0,"mat-error"),m(1),i()),o&2){let r=d();a(),u(r.message.required)}}var W=class o{constructor(e,r,t,v,Z){this.fb=e;this.projectService=r;this.router=t;this.activateRoute=v;this.authService=Z;this.createEditProjectForm=this.fb.group({title:["",f.required],totalCost:[null,f.required],description:["",f.required]})}createEditProjectForm;createEditProject={title:"",totalCost:0,description:"",idClient:""};params={};screenType="create";messageTitleType="";messageButtonType="";message=L;helpers=$;ngOnInit(){this.getParams()}createOrEdit(){if(!this.createEditProjectForm.valid){this.createEditProjectForm.markAllAsTouched();return}let e=this.createEditProjectForm.value;e.idClient=this.authService.getUser().clientId??"",this.projectService.CreateEditProject(this.screenType,this.params,e).subscribe({next:r=>{let t=this.screenType==="edit"?"Editado com sucesso!":"Cadastrado com sucesso!";C.default.fire({title:"Bom Trabalho!",text:t,icon:"success",confirmButtonText:"Ok!"}).then(v=>{v.isConfirmed&&this.router.navigate(["project/list"])})},error:r=>{let t=this.screenType==="edit"?"alterar":"cadastrar";C.default.fire({title:"Erro!",text:`Falha ao ${t}. Tente novamente.`,icon:"error",confirmButtonText:"Ok"})}})}fillInputs(){this.screenType==="edit"&&this.projectService.GetByIdProject(this.params).subscribe({next:e=>{this.createEditProjectForm.patchValue({title:e.title,totalCost:e.totalCost,description:e.description})},error:e=>{C.default.fire({title:"Erro!",text:"Falha ao buscar projeto. Tente novamente.",icon:"error",confirmButtonText:"Ok"})}})}getParams(){this.activateRoute.queryParams.subscribe(e=>{this.params=e,this.screenType=this.params.id?"edit":"create",this.setScreenTypeTexts(),this.fillInputs()})}setScreenTypeTexts(){let e=this.screenTexts[this.screenType];e&&(this.messageTitleType=e.title,this.messageButtonType=e.button)}screenTexts={create:{title:"Vamos cadastrar seu novo projeto!",button:"Cadastrar"},edit:{title:"Editar projeto",button:"Salvar"}};static \u0275fac=function(r){return new(r||o)(s(O),s(H),s(T),s(I),s(q))};static \u0275cmp=j({type:o,selectors:[["app-project-create-edit"]],decls:22,vars:6,consts:[[1,"ld-project-create-edit"],["back","project/list"],[1,"left",3,"ngSubmit","formGroup"],[1,"main-title"],["appearance","outline",1,"ld-input"],["matInput","","formControlName","title"],[4,"ngIf"],["appearance","outline"],["matInput","","type","text","formControlName","totalCost","mask","separator.2","thousandSeparator",".","decimalMarker",",","prefix","R$ ","inputMode","decimal","placeholder","Digite o valor"],["matInput","","formControlName","description"],[3,"text"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"app-ld-wrapper",1)(2,"form",2),g("ngSubmit",function(){return t.createOrEdit()}),n(3,"h1",3),m(4),i(),n(5,"mat-form-field",4)(6,"mat-label"),m(7,"T\xEDtulo"),i(),c(8,"input",5),l(9,Q,2,1,"mat-error",6),i(),n(10,"mat-form-field",7)(11,"mat-label"),m(12,"Custo Total"),i(),c(13,"input",8),l(14,X,2,1,"mat-error",6),i(),n(15,"mat-form-field",4)(16,"mat-label"),m(17,"Descri\xE7\xE3o"),i(),c(18,"textarea",9),l(19,Y,2,1,"mat-error",6),i(),c(20,"app-ld-button",10),i(),c(21,"app-ld-bg-cubes"),i()()),r&2&&(a(2),p("formGroup",t.createEditProjectForm),a(2),u(t.messageTitleType),a(5),p("ngIf",t.helpers.isInvalid(t.createEditProjectForm,"title","required")),a(5),p("ngIf",t.helpers.isInvalid(t.createEditProjectForm,"totalCost","required")),a(5),p("ngIf",t.helpers.isInvalid(t.createEditProjectForm,"description","required")),a(),h("text",t.messageButtonType))},dependencies:[R,z,N,G,k,A,D,V,w,x,P,B,_,S,b,y,F,M,U],styles:[".ld-project-create-edit[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{max-width:368px;margin:auto}.ld-project-create-edit[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%] > .ld-button[_ngcontent-%COMP%]{margin-top:40px}.ld-project-create-edit[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%] > .main-title[_ngcontent-%COMP%]{font-size:calc(var(--ld-font-size-base) + 32px);font-weight:800;max-width:415px;margin-bottom:40px}"]})};export{W as ProjectCreateEditComponent};
